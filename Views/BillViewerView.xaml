<?xml version="1.0" encoding="UTF-8" ?>
<Page
    x:Class="RepairShopBilling.Views.BillViewerView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{StaticResource DarkGreyBackgroundBrush}">

    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Assets/Styles/AppStyles.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Page.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <Grid Margin="40,20,40,40" MaxWidth="800">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Header Section -->
            <StackPanel Grid.Row="0" Margin="0,0,0,30">
                <!-- Shop Name -->
                <TextBlock 
                    Text="Solid State Dave" 
                    Foreground="{StaticResource WhiteTextBrush}"
                    FontFamily="Segoe UI"
                    FontSize="32"
                    FontWeight="Bold"
                    HorizontalAlignment="Center"
                    Margin="0,0,0,20" />
                
                <!-- Bill Title -->
                <TextBlock 
                    Text="Service Invoice" 
                    Foreground="{StaticResource LightGreyTextBrush}"
                    FontFamily="Segoe UI"
                    FontSize="18"
                    FontWeight="SemiBold"
                    HorizontalAlignment="Center"
                    Margin="0,0,0,10" />
            </StackPanel>

            <!-- Customer Information Section -->
            <Border Grid.Row="1" 
                    Background="{StaticResource LighterGreyBackgroundBrush}"
                    CornerRadius="8"
                    Padding="20"
                    Margin="0,0,0,20">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    
                    <!-- Customer Details -->
                    <StackPanel Grid.Column="0" Spacing="8">
                        <TextBlock 
                            Text="Customer Information"
                            Foreground="{StaticResource RedAccentBrush}"
                            FontFamily="Segoe UI"
                            FontSize="16"
                            FontWeight="Bold"
                            Margin="0,0,0,8" />
                        
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock 
                                Text="Name:"
                                Foreground="{StaticResource LightGreyTextBrush}"
                                FontFamily="Segoe UI"
                                FontSize="14"
                                FontWeight="SemiBold"
                                MinWidth="60" />
                            <TextBlock 
                                Text="{Binding CurrentBill.CustomerName}"
                                Foreground="{StaticResource WhiteTextBrush}"
                                FontFamily="Segoe UI"
                                FontSize="14" />
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock 
                                Text="Device:"
                                Foreground="{StaticResource LightGreyTextBrush}"
                                FontFamily="Segoe UI"
                                FontSize="14"
                                FontWeight="SemiBold"
                                MinWidth="60" />
                            <TextBlock 
                                Text="{Binding CurrentBill.DeviceType}"
                                Foreground="{StaticResource WhiteTextBrush}"
                                FontFamily="Segoe UI"
                                FontSize="14" />
                        </StackPanel>
                    </StackPanel>
                    
                    <!-- Bill Details -->
                    <StackPanel Grid.Column="1" Spacing="8">
                        <TextBlock 
                            Text="Bill Information"
                            Foreground="{StaticResource RedAccentBrush}"
                            FontFamily="Segoe UI"
                            FontSize="16"
                            FontWeight="Bold"
                            Margin="0,0,0,8" />
                        
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock 
                                Text="Date:"
                                Foreground="{StaticResource LightGreyTextBrush}"
                                FontFamily="Segoe UI"
                                FontSize="14"
                                FontWeight="SemiBold"
                                MinWidth="60" />
                            <TextBlock 
                                Text="{Binding CurrentBill.Date, Converter={StaticResource DateConverter}}"
                                Foreground="{StaticResource WhiteTextBrush}"
                                FontFamily="Segoe UI"
                                FontSize="14" />
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock 
                                Text="Bill #:"
                                Foreground="{StaticResource LightGreyTextBrush}"
                                FontFamily="Segoe UI"
                                FontSize="14"
                                FontWeight="SemiBold"
                                MinWidth="60" />
                            <TextBlock 
                                Text="{Binding CurrentBill.BillId, Converter={StaticResource BillIdConverter}}"
                                Foreground="{StaticResource WhiteTextBrush}"
                                FontFamily="Segoe UI"
                                FontSize="14" />
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Services Table Header -->
            <Border Grid.Row="2" 
                    Background="{StaticResource RedAccentBrush}"
                    CornerRadius="8,8,0,0"
                    Padding="0"
                    Margin="0,0,0,0">
                <Grid Padding="20,12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="3*" />
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="1.5*" />
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock 
                        Grid.Column="0"
                        Text="Services"
                        Foreground="{StaticResource WhiteTextBrush}"
                        FontFamily="Segoe UI"
                        FontSize="16"
                        FontWeight="Bold"
                        VerticalAlignment="Center" />
                    
                    <TextBlock 
                        Grid.Column="1"
                        Text="Amount"
                        Foreground="{StaticResource WhiteTextBrush}"
                        FontFamily="Segoe UI"
                        FontSize="16"
                        FontWeight="Bold"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center" />
                    
                    <TextBlock 
                        Grid.Column="2"
                        Text="Price"
                        Foreground="{StaticResource WhiteTextBrush}"
                        FontFamily="Segoe UI"
                        FontSize="16"
                        FontWeight="Bold"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center" />
                </Grid>
            </Border>

            <!-- Services Table Content -->
            <Border Grid.Row="3" 
                    Background="{StaticResource LighterGreyBackgroundBrush}"
                    CornerRadius="0,0,8,8"
                    Padding="0"
                    Margin="0,0,0,20">
                <ItemsControl ItemsSource="{Binding CurrentBill.Items}" Padding="0">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="{StaticResource LightGreyTextBrush}" 
                                    BorderThickness="0,0,0,1" 
                                    Padding="20,12">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="3*" />
                                        <ColumnDefinition Width="1*" />
                                        <ColumnDefinition Width="1.5*" />
                                    </Grid.ColumnDefinitions>
                                    
                                    <TextBlock 
                                        Grid.Column="0"
                                        Text="{Binding Description}"
                                        Foreground="{StaticResource WhiteTextBrush}"
                                        FontFamily="Segoe UI"
                                        FontSize="14"
                                        TextWrapping="Wrap"
                                        VerticalAlignment="Center" />
                                    
                                    <TextBlock 
                                        Grid.Column="1"
                                        Text="{Binding Quantity}"
                                        Foreground="{StaticResource WhiteTextBrush}"
                                        FontFamily="Segoe UI"
                                        FontSize="14"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center" />
                                    
                                    <TextBlock 
                                        Grid.Column="2"
                                        Text="{Binding TotalPrice, Converter={StaticResource CurrencyConverter}}"
                                        Foreground="{StaticResource WhiteTextBrush}"
                                        FontFamily="Segoe UI"
                                        FontSize="14"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center" />
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </Border>

            <!-- Total Section -->
            <Border Grid.Row="4" 
                    Background="{StaticResource LighterGreyBackgroundBrush}"
                    CornerRadius="8"
                    Padding="20"
                    Margin="0,0,0,30">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock 
                        Grid.Column="0"
                        Text="Total Amount:"
                        Foreground="{StaticResource WhiteTextBrush}"
                        FontFamily="Segoe UI"
                        FontSize="20"
                        FontWeight="Bold"
                        VerticalAlignment="Center" />
                    
                    <TextBlock 
                        Grid.Column="1"
                        Text="{Binding CurrentBill.TotalAmount, Converter={StaticResource CurrencyConverter}}"
                        Foreground="{StaticResource RedAccentBrush}"
                        FontFamily="Segoe UI"
                        FontSize="24"
                        FontWeight="Bold"
                        VerticalAlignment="Center" />
                </Grid>
            </Border>

            <!-- Action Buttons -->
            <StackPanel Grid.Row="5" 
                        Orientation="Horizontal" 
                        HorizontalAlignment="Center" 
                        Spacing="20"
                        Margin="0,0,0,30">
                <Button 
                    Content="Download PDF"
                    Style="{StaticResource RedAccentButton}"
                    Command="{Binding GeneratePdfCommand}"
                    MinWidth="150" />
                
                <Button 
                    Content="Share"
                    Style="{StaticResource RedAccentButton}"
                    Command="{Binding ShareBillCommand}"
                    MinWidth="150" />
            </StackPanel>

            <!-- Footer Section -->
            <StackPanel Grid.Row="6" 
                        HorizontalAlignment="Center" 
                        VerticalAlignment="Bottom"
                        Spacing="12">
                
                <!-- Logo Placeholder -->
                <Border 
                    Width="80" 
                    Height="80" 
                    Background="{StaticResource LighterGreyBackgroundBrush}"
                    CornerRadius="8"
                    HorizontalAlignment="Center">
                    <TextBlock 
                        Text="LOGO"
                        Foreground="{StaticResource LightGreyTextBrush}"
                        FontFamily="Segoe UI"
                        FontSize="12"
                        FontWeight="Bold"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center" />
                </Border>
                
                <!-- Thank You Message -->
                <TextBlock 
                    Text="Thank you for your business!"
                    Foreground="{StaticResource WhiteTextBrush}"
                    FontFamily="Segoe UI"
                    FontSize="16"
                    FontWeight="SemiBold"
                    HorizontalAlignment="Center"
                    Margin="0,8,0,0" />
                
                <!-- Contact Information -->
                <StackPanel HorizontalAlignment="Center" Spacing="4">
                    <TextBlock 
                        Text="www.solidstatedave.com"
                        Foreground="{StaticResource LightGreyTextBrush}"
                        FontFamily="Segoe UI"
                        FontSize="14"
                        HorizontalAlignment="Center" />
                    
                    <TextBlock 
                        Text="(555) 123-4567"
                        Foreground="{StaticResource LightGreyTextBrush}"
                        FontFamily="Segoe UI"
                        FontSize="14"
                        HorizontalAlignment="Center" />
                </StackPanel>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</Page>